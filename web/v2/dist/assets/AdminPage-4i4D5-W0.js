import{E as e,a as t,c as n,d as r,f as i,i as a,m as o,n as s,o as c,p as l,r as u,t as d,u as f,w as p}from"./index-DGCA_Ui7.js";const m=()=>l({queryKey:[r.users],queryFn:async()=>(await i.get(f.USERS).json()).data});var h=async e=>i.delete(`${f.USERS}/${e}`).json();const g=()=>s(h,{errorFallback:`Ошибка удаления пользователя`,successFallback:`Пользователь удалён`,invalidateQueryKeys:[[r.users]]});var _=o();function v({id:t}){let{mutate:n,isPending:r}=g();return(0,_.jsx)(e,{title:`Удалить пользователя: ${t} `,placement:`top`,children:(0,_.jsx)(`span`,{style:{display:`inline-block`},children:(0,_.jsx)(u,{onClick:()=>n(t),loading:r,size:`large`})})})}function y(){let{data:e,isLoading:t,isError:n}=m(),r=e?.users??[];return t?(0,_.jsx)(`div`,{children:`Loading...`}):n?(0,_.jsx)(`div`,{children:`Error`}):r.length?(0,_.jsx)(c,{children:(0,_.jsx)(`div`,{className:`stack`,children:r.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h2`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`span`,{children:[`Username: `,e.username]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Login: `,e.login]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Role: `,e.role]})]}),(0,_.jsx)(v,{id:e.id})]},e.id))})}):(0,_.jsx)(`div`,{children:`No users found`})}var b=[{key:`users`,label:`Пользователи`,children:(0,_.jsx)(y,{})},{key:`messages`,label:`Сообщения`,children:(0,_.jsx)(()=>{let{data:e}=t();return(0,_.jsxs)(`div`,{style:{width:`100%`},children:[(0,_.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,margin:`8px`},children:[(0,_.jsxs)(`div`,{children:[`Всего: `,e.length]}),(0,_.jsx)(a,{})]}),e.length===0?(0,_.jsx)(`div`,{children:`Сообщений нет`}):(0,_.jsx)(c,{children:(0,_.jsx)(`div`,{className:`stack`,children:e.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h3`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`div`,{children:[`Username: `,e.username,` (Id: `,e.authorId,`)`]}),(0,_.jsxs)(`div`,{children:[`Body: `,(0,_.jsx)(`b`,{children:e.body})]}),(0,_.jsxs)(`div`,{children:[`Type: `,e.type]}),(0,_.jsxs)(`div`,{children:[`Sent at: `,e.sentAt]})]}),(0,_.jsx)(d,{id:e.id})]},e.id))})})]})},{})},{key:`comments`,label:`Комментарии`,children:`Комментарии`,disabled:!0}],x=e=>e===`users`||e===`messages`;const S=()=>{let e=n(e=>e.adminTabKey),t=n(e=>e.setAdminTabKey);return(0,_.jsx)(`div`,{className:`tabs-page`,children:(0,_.jsx)(p,{activeKey:e,items:b,onChange:e=>{x(e)&&t(e)}})})};export{S as AdminPage};