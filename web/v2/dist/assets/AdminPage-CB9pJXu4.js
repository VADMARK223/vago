import{C as e,S as t,T as n,a as r,c as i,d as a,i as o,l as s,o as c,s as l,t as u,u as d,x as f}from"./index-dP-8kgX5.js";const p=()=>s({queryKey:[r.USERS],queryFn:async()=>(await c.get(o.USERS).json()).data}),m=()=>{let e=d();return i({mutationFn:e=>c.delete(`${o.USERS}/${e}`).json(),onSuccess:async()=>{await e.invalidateQueries({queryKey:[r.USERS]})}})},h=()=>s({queryKey:[r.MESSAGES],queryFn:async()=>(await c.get(o.MESSAGES).json()).data}),g=()=>{let e=d();return i({mutationFn:e=>c.delete(`${o.MESSAGES}/${e}`).json(),onSuccess:async()=>{await e.invalidateQueries({queryKey:[r.MESSAGES]})}})};var _=a();function v({id:t}){let{message:r}=n.useApp(),{mutate:i,isPending:a}=m();return(0,_.jsx)(e,{type:`primary`,onClick:()=>{i(t,{onSuccess:async e=>{r.success(e.message)},onError:async e=>{let t=await l(e);r.error(t??`Ошибка удаления пользователя`)}})},danger:!0,loading:a,size:`large`,icon:(0,_.jsx)(f,{})})}function y(){let{data:e,isLoading:t,isError:n}=p(),r=e?.users??[];return t?(0,_.jsx)(`div`,{children:`Loading...`}):n?(0,_.jsx)(`div`,{children:`Error`}):r.length?(0,_.jsx)(u,{children:(0,_.jsx)(`div`,{className:`stack`,children:r.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h2`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`span`,{children:[`Username: `,e.username]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Login: `,e.login]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Role: `,e.role]})]}),(0,_.jsx)(v,{id:e.id})]},e.id))})}):(0,_.jsx)(`div`,{children:`No users found`})}const b=({id:t})=>{let{message:r}=n.useApp(),{mutate:i,isPending:a}=g();return(0,_.jsx)(e,{type:`primary`,onClick:()=>{i(t,{onSuccess:async e=>{r.success(e.message)},onError:async e=>{let t=await l(e);r.error(t??`Ошибка удаления сообщение`)}})},danger:!0,loading:a,size:`large`,icon:(0,_.jsx)(f,{})})},x=()=>{let{data:e,isLoading:t,isError:n}=h(),r=e?.messages??[];return t?(0,_.jsx)(`div`,{children:`Loading...`}):n?(0,_.jsx)(`div`,{children:`Error`}):r.length?(0,_.jsx)(u,{children:(0,_.jsx)(`div`,{className:`stack`,children:r.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h3`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`div`,{children:[`Username: `,e.username,` (Id: `,e.authorId,`)`]}),(0,_.jsxs)(`div`,{children:[`Body: `,(0,_.jsx)(`b`,{children:e.body})]}),(0,_.jsxs)(`div`,{children:[`Type: `,e.type]}),(0,_.jsxs)(`div`,{children:[`Sent at: `,e.sentAt]})]}),(0,_.jsx)(b,{id:e.id})]},e.id))})}):(0,_.jsx)(`div`,{children:`Сообщений нет`})};var S=`messages`;const C=()=>(0,_.jsx)(`div`,{className:`tabs-page`,children:(0,_.jsx)(t,{defaultActiveKey:S,items:[{key:`users`,label:`Пользователи`,children:(0,_.jsx)(y,{})},{key:`messages`,label:`Сообщения`,children:(0,_.jsx)(x,{})},{key:`comments`,label:`Комментарии`,children:`Комментарии`,disabled:!0}],onChange:e=>{console.log(`handleTabChange`,e)}})});export{C as AdminPage};