import{M as e,N as t,S as n,X as r,_ as i,b as a,c as o,f as s,g as c,i as l,n as u,nt as d,o as f,r as p,t as m,v as h,x as g,y as _,z as v}from"./index--0IR_fBp.js";const y=()=>a({queryKey:[i.users],queryFn:async()=>(await h.get(c.USERS).json()).data});var b=async e=>h.delete(`${c.USERS}/${e}`).json();const x=()=>u(b,{errorFallback:`Ошибка удаления пользователя`,successFallback:`Пользователь удалён`,invalidateQueryKeys:[[i.users]]});var S=n();function C({id:e}){let{mutate:t,isPending:n}=x();return(0,S.jsx)(d,{title:`Удалить пользователя: ${e} `,placement:`top`,children:(0,S.jsx)(`span`,{style:{display:`inline-block`},children:(0,S.jsx)(p,{onClick:()=>t(e),loading:n,size:`large`})})})}function w(){let{data:e,isLoading:t,isError:n}=y(),r=e?.users??[];return t?(0,S.jsx)(`div`,{children:`Loading...`}):n?(0,S.jsx)(`div`,{children:`Error`}):r.length?(0,S.jsxs)(`div`,{className:`pageWithScroll`,children:[(0,S.jsxs)(`div`,{children:[`Кол-во пользователей: `,(0,S.jsx)(`b`,{children:r.length})]}),(0,S.jsx)(f,{children:(0,S.jsx)(s,{children:r.map(e=>(0,S.jsxs)(`div`,{className:`panel`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsxs)(`h2`,{children:[`ID: `,e.id]}),(0,S.jsxs)(`span`,{children:[`Username: `,e.username]}),(0,S.jsx)(`br`,{}),(0,S.jsxs)(`span`,{children:[`Login: `,e.login]}),(0,S.jsx)(`br`,{}),(0,S.jsxs)(`span`,{children:[`Role: `,e.role]})]}),(0,S.jsx)(C,{id:e.id})]},e.id))})})]}):(0,S.jsx)(`div`,{children:`No users found`})}const T=()=>{let e=g();return _({mutationFn:async()=>h.delete(`${c.MESSAGES}`).json(),onSuccess:()=>{t.success(`Все сообщения удалены`).then(),e.invalidateQueries({queryKey:[i.messages]}).then()},onError:()=>{t.error(`Error deleting messages`).then()}})},E=()=>{let t=T();return(0,S.jsx)(r,{danger:!0,disabled:!1,onClick:()=>{t.mutate()},icon:(0,S.jsx)(e,{}),children:`Удалить все сообщения`})};var D=[{key:`users`,label:`Пользователи`,children:(0,S.jsx)(w,{})},{key:`messages`,label:`Сообщения`,children:(0,S.jsx)(()=>{let{data:e}=l();return(0,S.jsxs)(`div`,{className:`pageWithScroll`,children:[(0,S.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,margin:`8px`,flex:`0 0 auto`},children:[(0,S.jsxs)(`div`,{children:[`Всего: `,e.length]}),(0,S.jsx)(E,{})]}),(0,S.jsx)(f,{children:(0,S.jsx)(s,{children:e.map(e=>(0,S.jsxs)(`div`,{className:`panel`,children:[(0,S.jsxs)(`div`,{children:[(0,S.jsxs)(`h3`,{children:[`ID: `,e.id]}),(0,S.jsxs)(`div`,{children:[`Username: `,e.username,` (Id: `,e.authorId,`)`]}),(0,S.jsxs)(`div`,{children:[`Body: `,(0,S.jsx)(`b`,{children:e.body})]}),(0,S.jsxs)(`div`,{children:[`Type: `,e.type]}),(0,S.jsxs)(`div`,{children:[`Sent at: `,e.sentAt]})]}),(0,S.jsx)(m,{id:e.id})]},e.id))})})]})},{})},{key:`comments`,label:`Комментарии`,children:`Комментарии`,disabled:!0}],O=e=>e===`users`||e===`messages`;const k=()=>{let e=o(e=>e.adminTabKey),t=o(e=>e.setAdminTabKey);return(0,S.jsx)(`div`,{className:`pageWithScroll`,children:(0,S.jsx)(v,{activeKey:e,items:D,onChange:e=>{O(e)&&t(e)}})})};export{k as AdminPage};