import{E as e,O as t,a as n,c as r,f as i,g as a,h as o,i as s,m as c,n as l,o as u,p as d,r as f,t as p}from"./index-BTwSYiR7.js";const m=()=>o({queryKey:[d.users],queryFn:async()=>(await c.get(i.USERS).json()).data});var h=async e=>c.delete(`${i.USERS}/${e}`).json();const g=()=>l(h,{errorFallback:`Ошибка удаления пользователя`,successFallback:`Пользователь удалён`,invalidateQueryKeys:[[d.users]]});var _=a();function v({id:e}){let{mutate:n,isPending:r}=g();return(0,_.jsx)(t,{title:`Удалить пользователя: ${e} `,placement:`top`,children:(0,_.jsx)(`span`,{style:{display:`inline-block`},children:(0,_.jsx)(f,{onClick:()=>n(e),loading:r,size:`large`})})})}function y(){let{data:e,isLoading:t,isError:n}=m(),r=e?.users??[];return t?(0,_.jsx)(`div`,{children:`Loading...`}):n?(0,_.jsx)(`div`,{children:`Error`}):r.length?(0,_.jsx)(u,{children:(0,_.jsx)(`div`,{className:`stack`,children:r.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h2`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`span`,{children:[`Username: `,e.username]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Login: `,e.login]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Role: `,e.role]})]}),(0,_.jsx)(v,{id:e.id})]},e.id))})}):(0,_.jsx)(`div`,{children:`No users found`})}var b=[{key:`users`,label:`Пользователи`,children:(0,_.jsx)(y,{})},{key:`messages`,label:`Сообщения`,children:(0,_.jsx)(()=>{let{data:e}=n();return(0,_.jsxs)(`div`,{style:{width:`100%`},children:[(0,_.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,margin:`8px`},children:[(0,_.jsxs)(`div`,{children:[`Всего: `,e.length]}),(0,_.jsx)(s,{})]}),e.length===0?(0,_.jsx)(`div`,{children:`Сообщений нет`}):(0,_.jsx)(u,{children:(0,_.jsx)(`div`,{className:`stack`,children:e.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h3`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`div`,{children:[`Username: `,e.username,` (Id: `,e.authorId,`)`]}),(0,_.jsxs)(`div`,{children:[`Body: `,(0,_.jsx)(`b`,{children:e.body})]}),(0,_.jsxs)(`div`,{children:[`Type: `,e.type]}),(0,_.jsxs)(`div`,{children:[`Sent at: `,e.sentAt]})]}),(0,_.jsx)(p,{id:e.id})]},e.id))})})]})},{})},{key:`comments`,label:`Комментарии`,children:`Комментарии`,disabled:!0}],x=e=>e===`users`||e===`messages`;const S=()=>{let t=r(e=>e.adminTabKey),n=r(e=>e.setAdminTabKey);return(0,_.jsx)(`div`,{className:`tabs-page`,children:(0,_.jsx)(e,{activeKey:t,items:b,onChange:e=>{x(e)&&n(e)}})})};export{S as AdminPage};