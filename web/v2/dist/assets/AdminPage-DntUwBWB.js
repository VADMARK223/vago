import{D as e,_ as t,a as n,g as r,h as i,i as a,k as o,l as s,m as c,n as l,o as u,p as d,r as f,t as p}from"./index-C7KgGvvy.js";const m=()=>r({queryKey:[c.users],queryFn:async()=>(await i.get(d.USERS).json()).data});var h=async e=>i.delete(`${d.USERS}/${e}`).json();const g=()=>l(h,{errorFallback:`Ошибка удаления пользователя`,successFallback:`Пользователь удалён`,invalidateQueryKeys:[[c.users]]});var _=t();function v({id:e}){let{mutate:t,isPending:n}=g();return(0,_.jsx)(o,{title:`Удалить пользователя: ${e} `,placement:`top`,children:(0,_.jsx)(`span`,{style:{display:`inline-block`},children:(0,_.jsx)(f,{onClick:()=>t(e),loading:n,size:`large`})})})}function y(){let{data:e,isLoading:t,isError:n}=m(),r=e?.users??[];return t?(0,_.jsx)(`div`,{children:`Loading...`}):n?(0,_.jsx)(`div`,{children:`Error`}):r.length?(0,_.jsx)(u,{children:(0,_.jsx)(`div`,{className:`stack`,children:r.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h2`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`span`,{children:[`Username: `,e.username]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Login: `,e.login]}),(0,_.jsx)(`br`,{}),(0,_.jsxs)(`span`,{children:[`Role: `,e.role]})]}),(0,_.jsx)(v,{id:e.id})]},e.id))})}):(0,_.jsx)(`div`,{children:`No users found`})}var b=[{key:`users`,label:`Пользователи`,children:(0,_.jsx)(y,{})},{key:`messages`,label:`Сообщения`,children:(0,_.jsx)(()=>{let{data:e}=n();return(0,_.jsxs)(`div`,{style:{width:`100%`,height:`100%`,display:`flex`,flexDirection:`column`,minHeight:0},children:[(0,_.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,margin:`8px`,flex:`0 0 auto`},children:[(0,_.jsxs)(`div`,{children:[`Всего: `,e.length]}),(0,_.jsx)(a,{})]}),e.length===0?(0,_.jsx)(`div`,{children:`Сообщений нет`}):(0,_.jsx)(`div`,{style:{flex:1,minHeight:0},children:(0,_.jsx)(u,{children:(0,_.jsx)(`div`,{className:`stack`,children:e.map(e=>(0,_.jsxs)(`div`,{className:`panel`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`h3`,{children:[`ID: `,e.id]}),(0,_.jsxs)(`div`,{children:[`Username: `,e.username,` (Id: `,e.authorId,`)`]}),(0,_.jsxs)(`div`,{children:[`Body: `,(0,_.jsx)(`b`,{children:e.body})]}),(0,_.jsxs)(`div`,{children:[`Type: `,e.type]}),(0,_.jsxs)(`div`,{children:[`Sent at: `,e.sentAt]})]}),(0,_.jsx)(p,{id:e.id})]},e.id))})})})]})},{})},{key:`comments`,label:`Комментарии`,children:`Комментарии`,disabled:!0}],x=e=>e===`users`||e===`messages`;const S=()=>{let t=s(e=>e.adminTabKey),n=s(e=>e.setAdminTabKey);return(0,_.jsx)(`div`,{className:`tabs-page`,children:(0,_.jsx)(e,{activeKey:t,items:b,onChange:e=>{x(e)&&n(e)}})})};export{S as AdminPage};