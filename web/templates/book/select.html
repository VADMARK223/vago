{{ define "book.select" }}
<h1>–ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä —Å–æ–±—ã—Ç–∏–π Select</h1>
<h2>–ß—Ç–æ —Ç–∞–∫–æ–µ <code>select</code></h2>
<p><code>select</code> –∂–¥—ë—Ç, –ø–æ–∫–∞ <b>–æ–¥–Ω–∞ –∏–∑ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–∞–Ω–∞–ª–æ–º</b> —Å—Ç–∞–Ω–µ—Ç –≥–æ—Ç–æ–≤–æ–π:</p>
<ul>
    <li>—á—Ç–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞</li>
    <li>–∑–∞–ø–∏—Å—å –≤ –∫–∞–Ω–∞–ª</li>
    <li>—Å–∏–≥–Ω–∞–ª –æ—Ç–º–µ–Ω—ã (<code>ctx.Done()</code>)</li>
    <li>—Ç–∞–π–º–µ—Ä (<code>time.After</code>, <code>time.Ticker</code>)</li>
</ul>
<p>–ö–∞–∫ —Ç–æ–ª—å–∫–æ <b>–æ–¥–∏–Ω –∫–µ–π—Å –≥–æ—Ç–æ–≤</b> ‚Äî –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.<br>
    –ï—Å–ª–∏ –≥–æ—Ç–æ–≤—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî Go <b>–≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ</b>.</p>
<p><code>select</code> <b>–Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞—â–∏—â–∞–µ—Ç</b> –∏ <b>–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–∞–º –ø–æ —Å–µ–±–µ</b>. <br>
    –û–Ω –ª–∏—à—å <b>–≤—ã–±–∏—Ä–∞–µ—Ç, —Å –∫–∞–∫–∏–º –∫–∞–Ω–∞–ª–æ–º —Ä–∞–±–æ—Ç–∞—Ç—å</b> –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç.</p>
<pre><code class="language-go">sselect {
case msg := <-ch:
    fmt.Println("–ü–æ–ª—É—á–∏–ª–∏:", msg)
case err := <-errCh:
    fmt.Println("–û—à–∏–±–∫–∞:", err)
}
</code></pre>
<p>üìå –¢—É—Ç <b>–Ω–µ—Ç –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö</b>, –µ—Å—Ç—å <b>–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</b>.<br>
    üí° –º—ã –Ω–µ –∑–Ω–∞–µ–º, —á—Ç–æ –ø—Ä–∏–¥—ë—Ç –ø–µ—Ä–≤—ã–º ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –æ—à–∏–±–∫–∞.
</p>

<h2>–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ (–∑–æ–ª–æ—Ç–æ–µ üèÜ)</h2>
<blockquote class="note"><b>–ï—Å–ª–∏ —É –≥–æ—Ä—É—Ç–∏–Ω—ã –µ—Å—Ç—å –∫–∞–Ω–∞–ª ‚Äî —É –Ω–µ—ë –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å <code>select</code> —Å <code>ctx.Done()</code></b></blockquote>

<h2><code>default</code> ‚Äî –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π <code>select</code></h2>
<pre><code class="language-go">select {
case msg := <-ch:
    fmt.Println(msg)
default:
    fmt.Println("–ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏—à–ª–æ")
}</code></pre>
<p>‚ö†Ô∏è <b>–í–∞–∂–Ω–æ</b>:<br/>
    –ï—Å–ª–∏ –≤—Å–µ –∫–∞–Ω–∞–ª—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è <code>default</code>, –∏ <code>select</code> <b>–Ω–µ –∂–¥—ë—Ç</b>.
</p>

<p>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:</p>
<ul>
    <li>–æ–ø—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è</li>
    <li>–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</li>
    <li>"–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ"</li>
</ul>

<h2>–¢–∞–π–º–∞—É—Ç—ã –∏ –¥–µ–¥–ª–∞–π–Ω—ã</h2>
<h3>–ß–µ—Ä–µ–∑ <code>time.After</code></h3>
<pre><code class="language-go">select {
case msg := <-ch:
    fmt.Println("–°–æ–æ–±—â–µ–Ω–∏–µ:", msg)
case <-time.After(2 * time.Second):
    fmt.Println("–¢–∞–π–º–∞—É—Ç")
}</code></pre>
<p>üí° –ß–∞—Å—Ç—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏–π.</p>

<h3>–ß–µ—Ä–µ–∑ <code>context.Context</code> (–ª—É—á—à–µ üëë)</h3>
<pre><code class="language-go">select {
case msg := <-ch:
    fmt.Println(msg)
case <-ctx.Done():
    fmt.Println("–ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç–º–µ–Ω—ë–Ω:", ctx.Err())
}</code></pre>
<ul>
    <li>–∫–∞–Ω–æ–Ω–∏—á–Ω–æ</li>
    <li>–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ</li>
    <li>–æ—Ç–º–µ–Ω—è–µ—Ç <b>–≤—Å—é —Ü–µ–ø–æ—á–∫—É</b></li>
</ul>

<h2><code>select</code> —Å –∑–∞–∫—Ä—ã—Ç—ã–º –∫–∞–Ω–∞–ª–æ–º</h2>
<pre><code class="language-go">ch := make(chan int)
close(ch)

select {
case v := <-ch:
    fmt.Println(v) // 0
}</code></pre>
<p>üìå –ß—Ç–µ–Ω–∏–µ –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞:</p>
<ul>
    <li>–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è</li>
    <li>–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç zero-value</li>
</ul>



<hr>
<p><code>select</code> ‚Äî —ç—Ç–æ:</p>
<ul>
    <li>–¥–∏—Å–ø–µ—Ç—á–µ—Ä</li>
    <li>event loop</li>
    <li>–º–µ—Ö–∞–Ω–∏–∑–º –æ–∂–∏–¥–∞–Ω–∏—è <b>–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π</b></li>
    <li>–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç <b>—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –∫–æ–¥–∞</b></li>
</ul>
<p>–ü–æ—ç—Ç–æ–º—É –æ–Ω —Å—Ç–æ–∏—Ç –º–µ–∂–¥—É:</p>
<ul>
    <li>–∫–∞–Ω–∞–ª–∞–º–∏</li>
    <li>context</li>
    <li>—Ç–∞–π–º–µ—Ä–∞–º–∏</li>
    <li>cancellation</li>
</ul>
<hr>
<p>‚ùì<i>–ê select ‚Äî —ç—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è?</i></p>
<p>üí° –•–æ—Ä–æ—à–∏–π –æ—Ç–≤–µ—Ç:</p>
<blockquote class="note"><code>select</code> —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º,
    –æ–Ω –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫–∞–Ω–∞–ª–∞–º–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –≥–æ—Ä—É—Ç–∏–Ω.</blockquote>

{{ end }}