<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/github-dark.min.css">
    <script src="/static/js/lib/highlight.min.js"></script>
    <script src="/static/js/common/scroll.js" defer></script>
    <script src="/static/js/components/test.js" defer></script>
</head>
<body>
{{ template "header" . }}

<main>
    <div id="quiz" data-question-id="{{.question.ID}}"></div>

    <div class="container">
        <h3>{{.question.ID}}. {{.question.Text}}</h3>
        <span style="margin-bottom: var(--space-2)">–¢–µ–º–∞: {{.question.TopicName}}</span>

        {{if .question.Code}}
        <pre><code class="language-go">{{.question.Code}}</code></pre>
        {{end}}

        {{range .question.Answers}}
        <button class="answer" data-id="{{.ID}}">
            {{.Text}}
        </button>
        {{end}}

        <div class="stack" style="margin-bottom: var(--space-2)">
            <p id="result">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç üëÜ</p>
            <p id="explanation" class="panel hidden" style="width: 100%"></p>

            <button id="continueBtn" class="btn btn-primary" hidden>
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
            </button>
        </div>

        <div class="scrollable-wrapper">
            <div class="scrollable-content" id="scrollable">
                <div class="stack">
                    <div class="panel" style="width: 100%">
                        <div style="margin-bottom: var(--space-2)">
                            {{ if gt .comments_count 0 }}
                            <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: {{ .comments_count }}</p>
                            {{ else }}
                            <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                            {{ end }}
                        </div>
                        <div id="comments">
                            {{ template "component.comments" dict
                            "Comments" .comments
                            "IsAuth" .user_id}}
                        </div>


                        {{ if .user_id }}
                        <div class="panel" style="width: 100%; margin-top: 16px">
                            <form method="post" action="/comments">
                                <input type="hidden" name="question_id" value="{{ .question.ID }}">

                                <label>
                                    <textarea name="content" rows="4" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."
                                              required></textarea>
                                </label>

                                <button type="submit" class="btn btn-primary" style="margin-top: var(--space-2)">
                                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                                </button>
                            </form>
                        </div>
                        {{ else }}
                        <div class="panel panel--success" style="width: 100%; margin-top: 16px">
                            <a href="/login">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ template "component.up_btn" . }}
        </div>

    </div>
</main>
<script>hljs.highlightAll();</script>
</body>
</html>