{{ define "header" }}
<header>
    <h2>{{.capture}}</h2>
    <div class="menu">
        <div>
            {{ template "component.href_btn" dict
            "Href" "/"
            "Icon" "fa-solid fa-house"
            "Path" .Path
            }}

            {{ template "component.href_btn" dict
            "Href" "/test"
            "Name" "–¢–µ—Å—Ç"
            "Icon" "fa-solid fa-check-double"
            "Path" .Path
            }}

            {{ template "component.href_btn" dict
            "Href" "/book"
            "Name" "–ö–Ω–∏–≥–∞"
            "Icon" "fa-solid fa-book"
            "Path" .Path
            }}


            {{ template "component.href_btn" dict
            "Href" "/tasks"
            "Name" "–ó–∞–¥–∞—á–∏"
            "Icon" "fa-solid fa-list-check"
            "Disabled" (not .user_id)
            "Path" .Path
            }}

            {{ template "component.href_btn" dict
            "Href" "/chat"
            "Name" "–ß–∞—Ç"
            "Icon" "fa-solid fa-comment"
            "Disabled" (not .user_id)
            "Path" .Path
            }}

            {{ template "component.href_btn" dict
            "Href" "/questions"
            "Name" "–í–æ–ø—Ä–æ—Å—ã"
            "Icon" "fa-solid fa-circle-question"
            "Path" .Path
            }}

            {{if .user_id}}
            {{if .is_admin}}
            <span>
                {{ template "component.href_btn" dict
                "Href" "/add_questions"
                "Icon" "fa-solid fa-plus"
                "Path" .Path
                }}

                {{ template "component.href_btn" dict
                "Href" "/admin"
                "Icon" "fa-solid fa-screwdriver-wrench"
                "Path" .Path
                }}
            </span>

            {{end}}
            {{end}}
        </div>

        <div>
            <span class="greetings">{{.username}}!</span>
            {{if .user_id}}
            <form action="/logout" method="POST" style="display:inline;">
                <button class="btn btn-primary" id="logBtn">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i>
                </button>
            </form>
            {{else}}
            <form action="/login" method="GET" style="display:inline;">
                <button class="btn btn-primary">
                    <i class="fa-solid fa-arrow-right-to-bracket"></i>
                </button>
            </form>
            {{end}}
        </div>
    </div>

    <script>
        (function () {
            const header = document.querySelector("header");
            if (!header) return;

            const SNOWFLAKES = ["‚ùÑ", "‚ùÖ", "‚ùÜ"];
            const MAX_SNOW = 120;

            function createSnowflake() {
                if (header.children.length > MAX_SNOW) return;

                const snow = document.createElement("div");
                snow.className = "snowflake";
                snow.textContent = SNOWFLAKES[Math.floor(Math.random() * SNOWFLAKES.length)];

                const size = 10 + Math.random() * 14;
                const duration = 2 + Math.random() * 3;

                snow.style.left = Math.random() * header.offsetWidth + "px";
                snow.style.fontSize = size + "px";
                snow.style.animationDuration = `${duration}s, ${1 + Math.random() * 2}s`;

                header.appendChild(snow);

                setTimeout(() => snow.remove(), duration * 1000);
            }

            // üí• –æ—Å–Ω–æ–≤–Ω–æ–π —Å–Ω–µ–≥–æ–ø–∞–¥
            setInterval(() => {
                for (let i = 0; i < 3; i++) {
                    createSnowflake();
                }
            }, 150);
        })();
    </script>

</header>
{{ end }}