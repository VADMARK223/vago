{{ define "admin/users_content" }}
<div class="list">
    {{range .Users}}
    <div class="item" id="user-{{.ID}}">
        <div class="item-info">
            <h3>{{.Login}} (ID {{.ID}})</h3>
            <p>Username: {{.Username}}</p>
            <p>Role: {{.Role}}</p>
        </div>
        <div>
            <button class="btn btn-danger btn-sm" onclick="deleteUser('{{.ID}}')"><i class="fa-solid fa-trash"></i></button>
        </div>
    </div>
    {{else}}
    <p class="empty">Нет пользователей</p>
    {{end}}
</div>

<script>
    async function deleteUser(id) {
        if (!confirm('Удалить пользователя?')) return;

        const res = await fetch(`/users/${id}`, { method: 'DELETE' });
        if (res.ok) {
            document.getElementById(`user-${id}`).remove();
        } else {
            const data = await res.json();
            alert(data.error || 'Error deleting user');
        }
    }
</script>

{{ end }}